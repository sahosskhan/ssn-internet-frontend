import { Search, X } from "lucide-react";
import { useState } from "react";
import toast, { Toaster } from "react-hot-toast";

const locationData = {
  "খুলনা বিভাগ": {
    "কুষ্টিয়া জেলা": [
      "কুমারখালী উপজেলা",
      "কুষ্টিয়া সদর উপজেলা",
      "খোকসা উপজেলা",
      "দৌলতপুর উপজেলা",
      "ভেড়ামারা উপজেলা",
      "মিরপুর উপজেলা",
    ],
    "খুলনা জেলা": [
      "কয়রা উপজেলা",
      "ডুমুরিয়া উপজেলা",
      "তেরখাদা উপজেলা",
      "দাকোপ উপজেলা",
      "দিঘলিয়া উপজেলা",
      "পাইকগাছা উপজেলা",
      "ফুলতলা উপজেলা",
      "বটিয়াঘাটা উপজেলা",
      "রূপসা উপজেলা",
    ],
    "চুয়াডাঙ্গা জেলা": [
      "আলমডাঙ্গা উপজেলা",
      "চুয়াডাঙ্গা সদর উপজেলা",
      "জীবননগর উপজেলা",
      "দামুড়হুদা উপজেলা",
    ],
    "ঝিনাইদহ জেলা": [
      "কালীগঞ্জ উপজেলা",
      "কোটচাঁদপুর উপজেলা",
      "ঝিনাইদহ সদর উপজেলা",
      "মহেশপুর উপজেলা",
      "শৈলকুপা উপজেলা",
      "হরিণাকুন্ডু উপজেলা",
    ],
    "নড়াইল জেলা": [
      "কালিয়া উপজেলা",
      "নড়াইল সদর উপজেলা",
      "লোহাগড়া উপজেলা",
    ],
    "বাগেরহাট জেলা": [
      "কচুয়া উপজেলা",
      "চিতলমারী উপজেলা",
      "ফকিরহাট উপজেলা",
      "বাগেরহাট সদর উপজেলা",
      "মোংলা উপজেলা",
      "মোড়েলগঞ্জ উপজেলা",
      "মোল্লাহাট উপজেলা",
      "রামপাল উপজেলা",
      "শরণখোলা উপজেলা",
    ],
    "মাগুরা জেলা": [
      "মাগুরা সদর উপজেলা",
      "মোহাম্মদপুর উপজেলা",
      "শালিখা উপজেলা",
      "শ্রীপুর উপজেলা",
    ],
    "মেহেরপুর জেলা": [
      "গাংনী উপজেলা",
      "মেহেরপুর সদর উপজেলা",
      "মুজিবনগর উপজেলা",
    ],
    "যশোর জেলা": [
      "অভয়নগর উপজেলা",
      "কেশবপুর উপজেলা",
      "চৌগাছা উপজেলা",
      "ঝিকরগাছা উপজেলা",
      "বাঘারপাড়া উপজেলা",
      "মনিরামপুর উপজেলা",
      "যশোর সদর উপজেলা",
      "শার্শা উপজেলা",
    ],
    "সাতক্ষীরা জেলা": [
      "আশাশুনি উপজেলা",
      "কলারোয়া উপজেলা",
      "কালীগঞ্জ উপজেলা",
      "তালা উপজেলা",
      "দেবহাটা উপজেলা",
      "শ্যামনগর উপজেলা",
      "সাতক্ষীরা সদর উপজেলা",
    ],
  },

  "ঢাকা বিভাগ": {
    "ঢাকা জেলা": [
      "ধানমন্ডি উপজেলা",
      "সাভার উপজেলা",
      "দোহার উপজেলা",
      "কেরানীগঞ্জ উপজেলা",
      "নবাবগঞ্জ উপজেলা",
    ],
    "ফরিদপুর জেলা": [
      "ফরিদপুর সদর উপজেলা",
      "বোয়ালমারী উপজেলা",
      "আলফাডাঙ্গা উপজেলা",
      "মধুখালী উপজেলা",
      "নগরকান্দা উপজেলা",
      "সালথা উপজেলা",
      "ভাঙ্গা উপজেলা",
      "চর ভদ্রাসন উপজেলা",
      "সদরপুর উপজেলা",
    ],
    "রাজবাড়ী জেলা": [
      "রাজবাড়ী সদর উপজেলা",
      "গোয়ালন্দ উপজেলা",
      "পাংশা উপজেলা",
      "বালিয়াকান্দি উপজেলা",
      "কালুখালী উপজেলা",
    ],
    "গোপালগঞ্জ জেলা": [
      "গোপালগঞ্জ সদর উপজেলা",
      "মুকসুদপুর উপজেলা",
      "কাশিয়ানী উপজেলা",
      "কোটালীপাড়া উপজেলা",
      "টুঙ্গিপাড়া উপজেলা",
    ],
    "মাদারীপুর জেলা": [
      "মাদারীপুর সদর উপজেলা",
      "শিবচর উপজেলা",
      "রাজৈর উপজেলা",
      "কালকিনি উপজেলা",
      "ডাসার উপজেলা",
    ],
    "শরীয়তপুর জেলা": [
      "শরীয়তপুর সদর উপজেলা",
      "জাজিরা উপজেলা",
      "নড়িয়া উপজেলা",
      "ভেদরগঞ্জ উপজেলা",
      "ডামুড্যা উপজেলা",
      "গোসাইরহাট উপজেলা",
    ],
    "মানিকগঞ্জ জেলা": [
      "মানিকগঞ্জ সদর উপজেলা",
      "শিবালয় উপজেলা",
      "ঘিওর উপজেলা",
      "দৌলতপুর উপজেলা",
      "সাটুরিয়া উপজেলা",
      "সিঙ্গাইর উপজেলা",
      "হরিরামপুর উপজেলা",
    ],
    "মুন্সীগঞ্জ জেলা": [
      "মুন্সীগঞ্জ সদর উপজেলা",
      "শ্রীনগর উপজেলা",
      "লৌহজং উপজেলা",
      "সিরাজদিখান উপজেলা",
      "টংগিবাড়ী উপজেলা",
      "গজারিয়া উপজেলা",
    ],
    "গাজীপুর জেলা": [
      "গাজীপুর সদর উপজেলা",
      "কালিয়াকৈর উপজেলা",
      "কালীগঞ্জ উপজেলা",
      "কাপাসিয়া উপজেলা",
      "শ্রীপুর উপজেলা",
    ],
    "নারায়ণগঞ্জ জেলা": [
      "নারায়ণগঞ্জ সদর উপজেলা",
      "বন্দর উপজেলা",
      "সোনারগাঁও উপজেলা",
      "আড়াইহাজার উপজেলা",
      "রূপগঞ্জ উপজেলা",
    ],
    "নরসিংদী জেলা": [
      "নরসিংদী সদর উপজেলা",
      "বেলাবো উপজেলা",
      "মনোহরদী উপজেলা",
      "শিবপুর উপজেলা",
      "রায়পুরা উপজেলা",
      "পলাশ উপজেলা",
    ],
    "টাঙ্গাইল জেলা": [
      "টাঙ্গাইল সদর উপজেলা",
      "কালিহাতি উপজেলা",
      "ঘাটাইল উপজেলা",
      "বাসাইল উপজেলা",
      "গোপালপুর উপজেলা",
      "মির্জাপুর উপজেলা",
      "ভূঞাপুর উপজেলা",
      "নাগরপুর উপজেলা",
      "মধুপুর উপজেলা",
      "সখিপুর উপজেলা",
      "দেলদুয়ার উপজেলা",
      "ধনবাড়ী উপজেলা",
    ],
    "কিশোরগঞ্জ জেলা": [
      "কিশোরগঞ্জ সদর উপজেলা",
      "অষ্টগ্রাম উপজেলা",
      "ইটনা উপজেলা",
      "করিমগঞ্জ উপজেলা",
      "কটিয়াদি উপজেলা",
      "কুলিয়ারচর উপজেলা",
      "তাড়াইল উপজেলা",
      "নিকলী উপজেলা",
      "পাকুন্দিয়া উপজেলা",
      "বাজিতপুর উপজেলা",
      "মিটামইন উপজেলা",
      "হোসেনপুর উপজেলা",
      "ভৈরব উপজেলা",
    ],
  },

  "চট্টগ্রাম বিভাগ": {
    "চট্টগ্রাম জেলা": [
      "আনোয়ারা উপজেলা",
      "কর্ণফুলি উপজেলা",
      "চন্দনাইশ উপজেলা",
      "পটিয়া উপজেলা",
      "ফটিকছড়ি উপজেলা",
      "বাঁশখালী উপজেলা",
      "বোয়ালখালী উপজেলা",
      "মীরসরাই উপজেলা",
      "রাউজান উপজেলা",
      "রাঙ্গুনিয়া উপজেলা",
      "লোহাগাড়া উপজেলা",
      "সন্দ্বীপ উপজেলা",
      "সাতকানিয়া উপজেলা",
      "সীতাকুণ্ড উপজেলা",
      "হাটহাজারী উপজেলা",
    ],
    "কক্সবাজার জেলা": [
      "উখিয়া উপজেলা",
      "কক্সবাজার সদর উপজেলা",
      "কুতুবদিয়া উপজেলা",
      "চকরিয়া উপজেলা",
      "টেকনাফ উপজেলা",
      "পেকুয়া উপজেলা",
      "মহেশখালী উপজেলা",
      "রামু উপজেলা",
      "ঈদগাঁও উপজেলা",
    ],
    "বান্দরবান জেলা": [
      "আলিকদম উপজেলা",
      "থানচি উপজেলা",
      "নাইক্ষ্যংছড়ি উপজেলা",
      "বান্দরবান সদর উপজেলা",
      "রুমা উপজেলা",
      "রোয়াংছড়ি উপজেলা",
      "লামা উপজেলা",
    ],
    "খাগড়াছড়ি জেলা": [
      "খাগড়াছড়ি সদর উপজেলা",
      "দীঘিনালা উপজেলা",
      "পানছড়ি উপজেলা",
      "মহালছড়ি উপজেলা",
      "মাটিরাঙ্গা উপজেলা",
      "মানিকছড়ি উপজেলা",
      "রামগড় উপজেলা",
      "লক্ষীছড়ি উপজেলা",
      "গুইমারা উপজেলা",
    ],
    "রাঙ্গামাটি জেলা": [
      "কাউখালী উপজেলা",
      "কাপ্তাই উপজেলা",
      "জুরাছড়ি উপজেলা",
      "নানিয়াচর উপজেলা",
      "বরকল উপজেলা",
      "বাঘাইছড়ি উপজেলা",
      "বিলাইছড়ি উপজেলা",
      "রাঙ্গামাটি সদর উপজেলা",
      "রাজস্থলী উপজেলা",
      "লংগদু উপজেলা",
    ],
  },

  "বরিশাল বিভাগ": {
    "বরিশাল জেলা": [
      "আগৈলঝাড়া উপজেলা",
      "বাকেরগঞ্জ উপজেলা",
      "বাবুগঞ্জ উপজেলা",
      "বানারীপাড়া উপজেলা",
      "গৌরনদী উপজেলা",
      "হিজলা উপজেলা",
      "বরিশাল সদর উপজেলা",
      "মেহেন্দিগঞ্জ উপজেলা",
      "মুলাদী উপজেলা",
      "উজিরপুর উপজেলা",
    ],
    "বরগুনা জেলা": [
      "বরগুনা সদর উপজেলা",
      "আমতলী উপজেলা",
      "তালতলী উপজেলা",
      "পাথরঘাটা উপজেলা",
      "বেতাগি উপজেলা",
      "বামনা উপজেলা",
    ],
    "ভোলা জেলা": [
      "চরফ্যাশন উপজেলা",
      "তজমুদ্দিন উপজেলা",
      "দৌলতখান উপজেলা",
      "বোরহানউদ্দিন উপজেলা",
      "ভোলা সদর উপজেলা",
      "মনপুরা উপজেলা",
      "লালমোহন উপজেলা",
    ],
    "ঝালকাঠি জেলা": [
      "কাঁঠালিয়া উপজেলা",
      "ঝালকাঠি সদর উপজেলা",
      "নলছিটি উপজেলা",
      "রাজাপুর উপজেলা",
    ],
    "পটুয়াখালী জেলা": [
      "পটুয়াখালী সদর উপজেলা",
      "বাউফল উপজেলা",
      "দশমিনা উপজেলা",
      "গলাচিপা উপজেলা",
      "কলাপাড়া উপজেলা",
      "মির্জাগঞ্জ উপজেলা",
      "দুমকি উপজেলা",
      "রাঙ্গাবালী উপজেলা",
    ],
    "পিরোজপুর জেলা": [
      "কাউখালী উপজেলা",
      "নাজিরপুর উপজেলা",
      "নেছারাবাদ (স্বরূপকাঠি) উপজেলা",
      "পিরোজপুর সদর উপজেলা",
      "ভান্ডারিয়া উপজেলা",
      "মঠবাড়িয়া উপজেলা",
      "ইন্দুরকানী উপজেলা",
    ],
  },

  "ময়মনসিংহ বিভাগ": {
    "ময়মনসিংহ জেলা": [
      "ময়মনসিংহ সদর উপজেলা",
      "ত্রিশাল উপজেলা",
      "গৌরীপুর উপজেলা",
      "মুক্তাগাছা উপজেলা",
      "ফুলপুর উপজেলা",
      "তারাকান্দা উপজেলা",
      "হালুয়াঘাট উপজেলা",
      "ভালুকা উপজেলা",
      "ফুলবাড়িয়া উপজেলা",
      "গফরগাঁও উপজেলা",
      "ঈশ্বরগঞ্জ উপজেলা",
      "নান্দাইল উপজেলা",
      "ধোবাউড়া উপজেলা",
    ],
    "শেরপুর জেলা": [
      "ঝিনাইগাতী উপজেলা",
      "নকলা উপজেলা",
      "নালিতাবাড়ী উপজেলা",
      "শেরপুর সদর উপজেলা",
      "শ্রীবরদী উপজেলা",
    ],
    "জামালপুর জেলা": [
      "জামালপুর সদর উপজেলা",
      "বকশীগঞ্জ উপজেলা",
      "দেওয়ানগঞ্জ উপজেলা",
      "ইসলামপুর উপজেলা",
      "মাদারগঞ্জ উপজেলা",
      "মেলান্দহ উপজেলা",
      "সরিষাবাড়ি উপজেলা",
    ],
    "নেত্রকোণা জেলা": [
      "আটপাড়া উপজেলা",
      "বারহাট্টা উপজেলা",
      "দুর্গাপুর উপজেলা",
      "খালিয়াজুড়ি উপজেলা",
      "কলমাকান্দা উপজেলা",
      "কেন্দুয়া উপজেলা",
      "মদন উপজেলা",
      "মোহনগঞ্জ উপজেলা",
      "নেত্রকোণা সদর উপজেলা",
      "পূর্বধলা উপজেলা",
    ],
  },

  "রংপুর বিভাগ": {
    "রংপুর জেলা": [
      "রংপুর সদর উপজেলা",
      "বদরগঞ্জ উপজেলা",
      "গংগাচড়া উপজেলা",
      "কাউনিয়া উপজেলা",
      "মিঠাপুকুর উপজেলা",
      "পীরগাছা উপজেলা",
      "পীরগঞ্জ উপজেলা",
      "তারাগঞ্জ উপজেলা",
    ],
    "দিনাজপুর জেলা": [
      "বিরামপুর উপজেলা",
      "বীরগঞ্জ উপজেলা",
      "বোচাগঞ্জ উপজেলা",
      "ফুলবাড়ী উপজেলা",
      "চিরিরবন্দর উপজেলা",
      "ঘোড়াঘাট উপজেলা",
      "হাকিমপুর উপজেলা",
      "কাহারোল উপজেলা",
      "খানসামা উপজেলা",
      "দিনাজপুর সদর উপজেলা",
      "নবাবগঞ্জ উপজেলা",
      "পার্বতীপুর উপজেলা",
      "বিরল উপজেলা",
    ],
    "গাইবান্ধা জেলা": [
      "গাইবান্ধা সদর উপজেলা",
      "ফুলছড়ি উপজেলা",
      "গোবিন্দগঞ্জ উপজেলা",
      "পলাশবাড়ী উপজেলা",
      "সাদুল্লাপুর উপজেলা",
      "সাঘাটা উপজেলা",
      "সুন্দরগঞ্জ উপজেলা",
    ],
    "কুড়িগ্রাম জেলা": [
      "উলিপুর উপজেলা",
      "কুড়িগ্রাম সদর উপজেলা",
      "চর রাজিবপুর উপজেলা",
      "চিলমারী উপজেলা",
      "নাগেশ্বরী উপজেলা",
      "ফুলবাড়ী উপজেলা",
      "ভুরুঙ্গামারী উপজেলা",
      "রাজারহাট উপজেলা",
      "রৌমারী উপজেলা",
    ],
    "নীলফামারী জেলা": [
      "নীলফামারী সদর উপজেলা",
      "ডোমার উপজেলা",
      "ডিমলা উপজেলা",
      "জলঢাকা উপজেলা",
      "কিশোরগঞ্জ উপজেলা",
      "সৈয়দপুর উপজেলা",
    ],
    "পঞ্চগড় জেলা": [
      "দেবীগঞ্জ উপজেলা",
      "তেতুলিয়া উপজেলা",
      "পঞ্চগড় সদর উপজেলা",
      "আটোয়ারী উপজেলা",
      "বোদা উপজেলা",
    ],
    "ঠাকুরগাঁও জেলা": [
      "ঠাকুরগাঁও সদর উপজেলা",
      "পীরগঞ্জ উপজেলা",
      "বালিয়াডাঙ্গী উপজেলা",
      "রানীশংকৈল উপজেলা",
      "হরিপুর উপজেলা",
    ],
    "লালমনিরহাট জেলা": [
      "আদিতমারী উপজেলা",
      "কালীগঞ্জ উপজেলা",
      "পাটগ্রাম উপজেলা",
      "লালমনিরহাট সদর উপজেলা",
      "হাতীবান্ধা উপজেলা",
    ],
  },

  "রাজশাহী বিভাগ": {
    "রাজশাহী জেলা": [
      "বাঘা উপজেলা",
      "পুঠিয়া উপজেলা",
      "পবা উপজেলা",
      "বাগমারা উপজেলা",
      "তানোর উপজেলা",
      "মোহনপুর উপজেলা",
      "চারঘাট উপজেলা",
      "গোদাগারী উপজেলা",
      "দুর্গাপুর উপজেলা",
    ],
    "নাটোর জেলা": [
      "নাটোর সদর উপজেলা",
      "বাগাতিপাড়া উপজেলা",
      "বরাইগ্রাম উপজেলা",
      "গুরুদাসপুর উপজেলা",
      "লালপুর উপজেলা",
      "সিংড়া উপজেলা",
      "নলডাঙ্গা উপজেলা",
    ],
    "চাঁপাইনবাবগঞ্জ জেলা": [
      "চাঁপাইনবাবগঞ্জ সদর উপজেলা",
      "গোমস্তাপুর উপজেলা",
      "শিবগঞ্জ উপজেলা",
      "নাচোল উপজেলা",
      "ভোলাহাট উপজেলা",
    ],
    "জয়পুরহাট জেলা": [
      "পাঁচবিবি উপজেলা",
      "কালাই উপজেলা",
      "ক্ষেতলাল উপজেলা",
      "আক্কেলপুর উপজেলা",
      "জয়পুরহাট সদর উপজেলা",
    ],
    "নওগাঁ জেলা": [
      "পত্নীতলা উপজেলা",
      "ধামুরহাট উপজেলা",
      "মহাদেবপুর উপজেলা",
      "পোরশা উপজেলা",
      "সাপাহার উপজেলা",
      "বদলগাছী উপজেলা",
      "মান্দা উপজেলা",
      "নিয়ামতপুর উপজেলা",
      "আত্রাই উপজেলা",
      "রানীনগর উপজেলা",
      "নওগাঁ সদর উপজেলা",
    ],
    "বগুড়া জেলা": [
      "আদমদিঘী উপজেলা",
      "বগুড়া সদর উপজেলা",
      "ধুনট উপজেলা",
      "দুপচাঁচিয়া উপজেলা",
      "গাবতলী উপজেলা",
      "কাহালু উপজেলা",
      "নন্দীগ্রাম উপজেলা",
      "সারিয়াকান্দি উপজেলা",
      "শেরপুর উপজেলা",
      "শিবগঞ্জ উপজেলা",
      "সোনাতলা উপজেলা",
      "শাজাহানপুর উপজেলা",
    ],
    "পাবনা জেলা": [
      "আটঘরিয়া উপজেলা",
      "ঈশ্বরদী উপজেলা",
      "চাটমোহর উপজেলা",
      "পাবনা সদর উপজেলা",
      "ফরিদপুর উপজেলা",
      "বেড়া উপজেলা",
      "ভাঙ্গুরা উপজেলা",
      "সাঁথিয়া উপজেলা",
      "সুজানগর উপজেলা",
    ],
    "সিরাজগঞ্জ জেলা": [
      "উল্লাপাড়া উপজেলা",
      "কাজীপুর উপজেলা",
      "কামারখন্দ উপজেলা",
      "চৌহালি উপজেলা",
      "তাড়াশ উপজেলা",
      "বেলকুচি উপজেলা",
      "রায়গঞ্জ উপজেলা",
      "শাহজাদপুর উপজেলা",
      "সিরাজগঞ্জ সদর উপজেলা",
    ],
  },

  "সিলেট বিভাগ": {
    "সিলেট জেলা": [
      "সিলেট সদর উপজেলা",
      "দক্ষিণ সুরমা উপজেলা",
      "বিশ্বনাথ উপজেলা",
      "ওসমানীনগর উপজেলা",
      "বালাগঞ্জ উপজেলা",
      "ফেঞ্চুগঞ্জ উপজেলা",
      "গোলাপগঞ্জ উপজেলা",
      "বিয়ানীবাজার উপজেলা",
      "জকিগঞ্জ উপজেলা",
      "কানাইঘাট উপজেলা",
      "জৈন্তাপুর উপজেলা",
      "গোয়াইনঘাট উপজেলা",
      "কোম্পানীগঞ্জ উপজেলা",
    ],
    "সুনামগঞ্জ জেলা": [
      "সুনামগঞ্জ সদর উপজেলা",
      "বিশ্বম্ভরপুর উপজেলা",
      "তাহিরপুর উপজেলা",
      "মধ্যনগর উপজেলা",
      "ধর্মপাশা উপজেলা",
      "জামালগঞ্জ উপজেলা",
      "শান্তিগঞ্জ উপজেলা",
      "দোয়ারাবাজার উপজেলা",
      "ছাতক উপজেলা",
      "জগন্নাথপুর উপজেলা",
      "দিরাই উপজেলা",
      "শাল্লা উপজেলা",
    ],
    "হবিগঞ্জ জেলা": [
      "হবিগঞ্জ সদর উপজেলা",
      "নবীগঞ্জ উপজেলা",
      "বাহুবল উপজেলা",
      "চুনারুঘাট উপজেলা",
      "শায়েস্তাগঞ্জ উপজেলা",
      "মাধবপুর উপজেলা",
      "লাখাই উপজেলা",
      "বানিয়াচং উপজেলা",
      "আজমিরীগঞ্জ উপজেলা",
    ],
    "মৌলভীবাজার জেলা": [
      "মৌলভীবাজার সদর উপজেলা",
      "রাজনগর উপজেলা",
      "শ্রীমঙ্গল উপজেলা",
      "কমলগঞ্জ উপজেলা",
      "কুলাউড়া উপজেলা",
      "জুড়ী উপজেলা",
      "বড়লেখা উপজেলা",
    ],
  },
};


const availableAreas = [
  { name: "কুষ্টিয়া সদর উপজেলা", district: "কুষ্টিয়া জেলা", division: "খুলনা বিভাগ" },
  { name: "ভেড়ামারা উপজেলা", district: "কুষ্টিয়া জেলা", division: "খুলনা বিভাগ" },
  { name: "মিরপুর উপজেলা", district: "কুষ্টিয়া জেলা", division: "খুলনা বিভাগ" },
];

const CustomSelect = ({ options, value, onChange, placeholder, disabled }) => {
  const [open, setOpen] = useState(false);

  return (
    <div className="relative w-full z-50">
      <button
        onClick={() => !disabled && setOpen(!open)}
        className={`w-full p-3 rounded-xl ${
          disabled ? "bg-gray-500/30 cursor-not-allowed" : "bg-white/30"
        } backdrop-blur-md border border-white/20 text-white flex justify-between items-center hover:bg-white/40 transition`}
      >
        {value || placeholder}
        <span className="ml-2">&#9660;</span>
      </button>

      {open && (
        <ul className="absolute top-full left-0 w-full mt-1 max-h-60 overflow-auto rounded-xl bg-white text-black border border-gray-200 shadow-lg z-50">
          {options.map((opt) => (
            <li
              key={opt}
              onClick={() => {
                onChange(opt);
                setOpen(false);
              }}
              className="cursor-pointer px-4 py-2 hover:bg-gray-200 transition"
            >
              {opt}
            </li>
          ))}
        </ul>
      )}
    </div>
  );
};

const CoverageArea = () => {
  const [division, setDivision] = useState("");
  const [district, setDistrict] = useState("");
  const [upazila, setUpazila] = useState("");

  const districts = division ? Object.keys(locationData[division]) : [];
  const upazilas = division && district ? locationData[division][district] : [];

  const handleSearch = () => {
    if (!division || !district || !upazila) {
      toast.error("সকল ফিল্ড পূরণ করুন!");
      return;
    }

    const found = availableAreas.find(
      (area) =>
        area.division === division &&
        area.district === district &&
        area.name === upazila
    );

    if (found) {
      toast.success(`🎉 Congrats! আমাদের সেবা ${upazila} এ উপলব্ধ।`);
    } else {
      toast.error(`😔 Sorry! আমাদের সেবা ${upazila} এ নেই।`);
    }
  };

  const handleClear = () => {
    setDivision("");
    setDistrict("");
    setUpazila("");
  };

  return (
    <section className="py-20 bg-gradient-to-b from-[#0b1320] via-[#111b2f] to-[#0b1320] text-white">
      <Toaster position="top-center" reverseOrder={false} />

      <div className="max-w-7xl mx-auto px-6">
        <h2 className="text-4xl font-bold text-center mb-4">Coverage Check</h2>
        <p className="text-lg text-center text-gray-300 mb-10 max-w-2xl mx-auto">
          আমাদের সেবা আপনার এলাকায় আছে কি না জানতে চান? Division, District এবং Upazila দিয়ে সহজেই সার্চ করুন।
        </p>

        {/* Search Filters */}
        <div className="bg-white/10 backdrop-blur-md rounded-2xl shadow-lg p-6 mb-12 relative z-10">
          <div className="grid md:grid-cols-3 gap-4 mb-4 relative">
            <CustomSelect
              options={Object.keys(locationData)}
              value={division}
              onChange={(val) => {
                setDivision(val);
                setDistrict("");
                setUpazila("");
              }}
              placeholder="Choose Division"
            />
            <CustomSelect
              options={districts}
              value={district}
              onChange={(val) => {
                setDistrict(val);
                setUpazila("");
              }}
              placeholder="Choose District"
              disabled={!division}
            />
            <CustomSelect
              options={upazilas}
              value={upazila}
              onChange={setUpazila}
              placeholder="Choose Upazila"
              disabled={!district}
            />
          </div>

          <div className="flex gap-4 mt-4 flex-wrap">
            <button
              onClick={handleSearch}
              className="flex-1 flex items-center justify-center gap-2 px-6 py-3 rounded-xl bg-gradient-to-r from-teal-400 to-indigo-500 font-semibold hover:scale-105 transition"
            >
              <Search className="w-5 h-5" /> Search Coverage
            </button>
            <button
              onClick={handleClear}
              className="flex-1 flex items-center justify-center gap-2 px-6 py-3 rounded-xl bg-red-500 font-semibold hover:scale-105 transition"
            >
              <X className="w-5 h-5" /> Clear Search
            </button>
          </div>
        </div>

        {/* Available Areas */}
        <h3 className="text-2xl font-semibold mb-6 relative z-0">Available Areas</h3>
        <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12 relative z-0">
          {availableAreas.map((area) => (
            <div
              key={area.name}
              className="bg-white/10 backdrop-blur-md rounded-2xl p-4 hover:scale-105 transition"
            >
              <h4 className="font-bold text-lg mb-2">{area.name}</h4>
              <p className="text-sm text-gray-300">
                {area.district}, {area.division}
              </p>
            </div>
          ))}
        </div>

        {/* Map Section */}
        <div className="bg-white/10 backdrop-blur-md rounded-2xl shadow-lg overflow-hidden relative z-0">
          <iframe
            src={`https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d365019.0!2d89.081382!3d23.905602!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x39fe860b2ef0aaf9%3A0x0!2sBheramara!5e0!3m2!1sen!2sbd!4v1694555555555!5m2!1sen!2sbd`}
            width="100%"
            height="400"
            style={{ border: 0 }}
            allowFullScreen
            loading="lazy"
          ></iframe>
        </div>
      </div>
    </section>
  );
};

export default CoverageArea;
